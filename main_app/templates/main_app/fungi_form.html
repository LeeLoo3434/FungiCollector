{% extends 'base.html' %}

{% block content %}
    {% if object %}
    <h1>Edit <span class="teal-text">{{object.name}}</span></h1>
    {% else %}
    <h1>New Mushroom</h1>
    {% endif %}

    {% if form.errors %}
    <div class="alert alert-danger">
        <ul>
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <li>{{ field }}: {{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <table>
            {% for field in form %}
                {% if not field.is_hidden %}
                    <tr>
                        <td>{{ field.label_tag }}</td>
                        <td>
                            {% if field.name == "edibility" or field.name == "identified" %}
                                <label>
                                    <input type="radio" name="{{ field.name }}" value="True" class="with-gap" {% if field.value %}checked{% endif %}>
                                    <span>Yes</span>
                                </label>
                                <label>
                                    <input type="radio" name="{{ field.name }}" value="False" class="with-gap" {% if not field.value %}checked{% endif %}>
                                    <span>No</span>
                                </label>
                            {% else %}
                                {{ field }}
                            {% endif %}
                            {% if field.help_text %}
                                <small style="display: block;">{{ field.help_text }}</small>
                            {% endif %}
                        </td>
                    </tr>
                {% else %}
                    {{ field }}
                {% endif %}
            {% endfor %}
        </table>
        <input type="submit" value="Submit!" class="btn">
    </form>

    <script>
        const dateEl = document.getElementById('id_date_collected');
        M.Datepicker.init(dateEl, {
            format: 'yyyy-mm-dd',
            defaultDate: new Date(),
            setDefaultDate: true,
            autoClose: true
        });
    </script>
{% endblock %}
